# Unified Remote System Update (uniLibRSU)

This repo contains the Unified remote system update which is made platform independent. The code base is taken from [intel-rsu](https://github.com/altera-opensource/intel-rsu) and is reworked to make it platform agnostic. For more information please checkout : https://www.intel.com/content/www/us/en/docs/programmable/683184/22-4/overview-s10-fm-dm.html

Note: Currently Zephyr RTOS is the only officially supported platform.

For doxygen documentation click this [link](https://reimagined-adventure-93rm25p.pages.github.io/)

# Remote System Update (RSU)
Remote system update feature allows you to update the FPGA image and reconfigure Agilex devices remotley on field with fallback mechanism support.

## Pre-requisite:
1. gcc/9.3.0 (for unit-test)
2. cmake/3.24.0 (build configuration tool)
3. arm_gnu/linaro/aarch64/9.2 (for linux aarch64 platform)
4. lcov/1.15 (optional)
5. doxygen/1.8.16 (optional)
6. ninja or make (build tool)
7. quartus (for generating collaterals for unit test)


# Cross compile for linux agilex platform
`cmake -S . -B build -G"Ninja" -DPLATFORM=linux-aarch64 && cmake --build build`

# Unit-Test
we are using google unit test framework to unit test the librsu code base.

`cmake -S . -B build -DUNIT_TEST=ON -G"Ninja" && cmake --build build && ctest --test-dir build`

## Coverage report
Coverage is enabled through cmake options: `-DCOVERAGE=ON`
It uses gcov and lcov to genarate the coverage report. For running unit-test with coverage and generate coverage report.

`cmake -S . -B build -DUNIT_TEST=ON -G"Ninja" -DCOVERAGE=ON && cmake --build build --target coverage && ctest --test-dir build && cmake --build build --target coverage-report`

# Building with zephyr

[Altera-opensource Zephyr RTOS](https://github.com/altera-opensource/zephyr-socfpga) is already integarted with uniLibRSU the build utility will get the required version of unified librsu from [altera-opensource](https://github.com/altera-opensource) by performing `west update`.

# Generating document
doxygen is used to generate the documentation. Documentation can be generated by using `-DBUILD_DOC=ON` in cmake build command.

Example: `cmake -S . -B build -DBUILD_DOC=ON -G"Ninja" && cmake --build build`
